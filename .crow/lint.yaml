when:
  - event: pull_request
    path: ['R/**', 'tests/**', 'DESCRIPTION', 'default.nix', 'NAMESPACE', '.crow/**']
  - event: push
    branch: ${CI_REPO_DEFAULT_BRANCH}
    path: ['R/**', 'tests/**', 'DESCRIPTION', 'default.nix', 'NAMESPACE', '.crow/**']

steps:
  - name: lint-r-jarl
    image: cr.codefloe.com/docker.io/alpine:3.23
    commands: |
      apk add --no-cache -q curl
      curl -L -o jarl-installer.sh https://github.com/etiennebacher/jarl/releases/download/0.4.0-alpha.2/jarl-installer.sh
      sh ./jarl-installer.sh
      source $HOME/.local/bin/env
      jarl check .
