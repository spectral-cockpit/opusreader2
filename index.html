<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Read Spectroscopic Data from Bruker OPUS Binary Files â€¢ opusreader2</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Read Spectroscopic Data from Bruker OPUS Binary Files">
<meta property="og:description" content="Parses all relevant data blocks from the OPUS binary files
    produced from Fourier-Transform infrared spectrometers of the company
    Bruker Optics GmbH &amp; Co.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">opusreader2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/file-specification-and-technical-details.html">OPUS file specification and technical details of the reader</a>
    </li>
    <li>
      <a href="articles/introduction.html">Reading Bruker OPUS binary files in R</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/spectral-cockpit/opusreader2/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="opusreader2">opusreader2<a class="anchor" aria-label="anchor" href="#opusreader2"></a>
</h1></div>
<!-- badges: start -->

<div class="section level2">
<h2 id="id_-scope">ðŸª„ Scope<a class="anchor" aria-label="anchor" href="#id_-scope"></a>
</h2>
<p>Read OPUS binary files from Fourier-Transform Infrared (FT-IR) spectrometers of the company Bruker Optics GmbH &amp; Co.Â in R.</p>
</div>
<div class="section level2">
<h2 id="id_-highlights-and-disclaimer">ðŸª© Highlights and disclaimer<a class="anchor" aria-label="anchor" href="#id_-highlights-and-disclaimer"></a>
</h2>
<p>We are currently at mid-development phase. The core API of <code><a href="reference/read_opus.html">opusreader2::read_opus()</a></code> has been solidified and we are not planning major user-facing design changes. We plan more features to exact specific parts of interest like measurement metadata or to accomplish read workflows for custom environments. Currently, we focus on</p>
<ol style="list-style-type: decimal">
<li>improving the ease of use (documentation, vignettes)</li>
<li>expanding support for Bruker data blocks even further</li>
<li>providing useful downstream features for metadata and spectra management.</li>
</ol>
<p>We now track changes under semantic versioning using <a href="https://github.com/cynkra/fledge" class="external-link">{fledge}</a>. Please consult the <a href="NEWS.html">NEWS</a> to follow progress and history of features along semantic versioning. Our goal is to release a stable version 1.0.0 on CRAN that is production ready, planned until End of January 2023.</p>
</div>
<div class="section level2">
<h2 id="id_-installation">ðŸ“¦ Installation<a class="anchor" aria-label="anchor" href="#id_-installation"></a>
</h2>
<p>The latest version can be installed</p>
<details><summary>
directly via <a href="https://spectral-cockpit.r-universe.dev/ui#package:opusreader2" class="external-link">R-universe</a> [expand]
</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install the latest version</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"opusreader2"</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  spectralcockpit <span class="op">=</span> <span class="st">'https://spectral-cockpit.r-universe.dev'</span>,</span>
<span>  CRAN <span class="op">=</span> <span class="st">'https://cloud.r-project.org'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</details><details><summary>
from GitHub via {remotes} [expand]
</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"spectral-cockpit/opusreader2"</span><span class="op">)</span></span></code></pre></div>
</details>
</div>
<div class="section level2">
<h2 id="id_-examples">ðŸ”¦ Examples<a class="anchor" aria-label="anchor" href="#id_-examples"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/spectral-cockpit/opusreader2" class="external-link">"opusreader2"</a></span><span class="op">)</span></span>
<span><span class="co"># read a single file (one measurement)</span></span>
<span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/opus_file.html">opus_file</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">data_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_opus.html">read_opus</a></span><span class="op">(</span>dsn <span class="op">=</span> <span class="va">file</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="advanced-testing-and-bruker-opus-file-specification">Advanced testing and Bruker OPUS file specification<a class="anchor" aria-label="anchor" href="#advanced-testing-and-bruker-opus-file-specification"></a>
</h2>
<p>We strive to have a full-fledged reader of OPUS files that is on par with the commercial reader in the Bruker OPUS software suite.</p>
<p>To contribute to the development, we will provide an additional vignette that describes the OPUS format and the technical details of our implementation in the package.</p>
</div>
<div class="section level2">
<h2 id="how-to-contribute">How to contribute<a class="anchor" aria-label="anchor" href="#how-to-contribute"></a>
</h2>
<p>We like the spirit of open source development, so any constructive suggestions or questions are always welcome. To trade off the consistency and quality of code with the drive for innovation, we are following some best practices (which can be indeed improved, as many other things in life). These are:</p>
<ul>
<li>
<strong>Code checks (linting), styling, and spell checking</strong>: We use the <a href="https://pre-commit.com/" class="external-link">pre-commit</a> framework with both some generic coding and R specific hooks configured in <a href=".pre-commit-config.yaml"><code>.pre-commit-config.yaml</code></a>. Generally, we follow the tidyverse style guide, with slight exceptions. To provide auto-fixing in PRs where possible, we rely on <a href="https://pre-commit.ci/lite.html" class="external-link">pre-commit.ci lite</a>.</li>
</ul>
<details><summary>
Install and enable pre-commit hooks locally (details)
</summary><ol style="list-style-type: decimal">
<li>install pre-commit with python3. For more details and options, see <a href="https://pre-commit.com/" class="external-link">the official documentation</a>
</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in terminal</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pip3</span> install pre-commit <span class="at">--user</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>enable the pre-commit hooks in <code>.pre-commit-config.yaml</code>
</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># change to cloned git directory of your fork of the package</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pre-commit</span> install</span></code></pre></div>
Once you do a <code>git commit -m "&lt;your-commit-message&gt;"</code>, the defined pre-commit hooks will automatically be applied on new commits.
</details><details><summary>
Check all files for which pre-commit hooks are configured (details)
</summary><div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in your terminal and package root directory</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pre-commit</span> run <span class="at">--all-files</span></span></code></pre></div>
</details>
</div>
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>This package is a major rework of {opusreader} made by Pierre Roudier and Philipp Baumann. {opusreader} works, but not for all OPUS files. This precessor package relies on an interesting but not optimal reverse engineered logic. Particularly, the assignment of spectral data types (i.e., single channel reflectance vs.Â final result spectrum), was buggy because the CO2 peak ratio was used as a heuristic. Also, byte offsets from three letter strings were directly used to read specific data and assign block types. This is not 100% robust and causes some read failures in edge cases.</p>
<p>The new package parses the file header for assigning spectral blocks.</p>
</div>
<div class="section level2">
<h2 id="credits">Credits<a class="anchor" aria-label="anchor" href="#credits"></a>
</h2>
<ul>
<li>Pierre Roudier and Philipp Baumann made an improved R reader, further developing the version in simplerspec. <a href="https://github.com/pierreroudier/opusreader" class="external-link uri">https://github.com/pierreroudier/opusreader</a>
</li>
<li>QED.ai: implemented a python parser which takes the main the logic of ono. <a href="https://github.com/qedsoftware/brukeropusreader" class="external-link uri">https://github.com/qedsoftware/brukeropusreader</a>
</li>
<li>twagner: wrote a OPUS FTIR clone called ono. Original decrypter of the header. <a href="https://pypi.org/project/ono/" class="external-link uri">https://pypi.org/project/ono/</a>
</li>
<li>Andrew Sila and Tomislav Hengl: wrote a first OPUS reader in R. <a href="https://github.com/cran/soil.spec/blob/master/R/read.opus.R" class="external-link uri">https://github.com/cran/soil.spec/blob/master/R/read.opus.R</a>
</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/spectral-cockpit/opusreader2/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/spectral-cockpit/opusreader2/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing opusreader2</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Philipp Baumann <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-3194-8975" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Thomas Knecht <br><small class="roles"> Author </small>  </li>
<li>Pierre Roudier <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-7431-2603" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>spectral-cockpit.com <br><small class="roles"> Copyright holder, funder </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/spectral-cockpit/opusreader2/actions" class="external-link"><img src="https://github.com/spectral-cockpit/opusreader2/workflows/tic/badge.svg?branch=main" alt="tic"></a></li>
<li><a href="https://opensource.org/licenses/MIT" class="external-link"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Philipp Baumann, Thomas Knecht, Pierre Roudier, spectral-cockpit.com.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
