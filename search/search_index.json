{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"opusreader2","text":"<p> Artwork by Lilyan Blazoudaki</p> <p></p>"},{"location":"#scope-and-motivation","title":"\ud83e\ude84\ud83e\udea9 Scope and Motivation","text":"<p>grab 'em all \u2014 {opusreader2} lets you import OPUS measurement data and parameters from Bruker Optics GmbH &amp; Co. instruments directly in R. Developed in our spare time \u2014 if you find it useful, consider buying us a coffee!</p> <p></p>"},{"location":"#highlights-and-disclaimer","title":"\ud83e\udea9 Highlights and disclaimer","text":"<p>The Bruker corporation produces reliable instruments; however, there is no official documentation for the OPUS file format, making it proprietary. Fortunately, over time, our team and colleagues from the open-source spectroscopy community have figured out how the OPUS binary format is structured and how we can parse it (see credits).</p> <p>{opusreader2} has no hard dependencies beyond base R. Community efforts are there to enhance support for a growing array of instruments, measurement modes, and block types.</p>"},{"location":"#installation","title":"\ud83d\udce6 Installation","text":"<p>The latest version can be installed</p> from CodeFloe.com via {remotes} [expand] <pre><code>if (!require(\"remotes\")) install.packages(\"remotes\")\nremotes::install_git(\"https://codefloe.com/spectral-cockpit/opusreader2\")\n</code></pre> directly via R-universe [expand] <pre><code># Install the latest version\ninstall.packages(\"opusreader2\", repos = c(\n  spectralcockpit = 'https://spectral-cockpit.r-universe.dev',\n  CRAN = 'https://cloud.r-project.org'))\n</code></pre>"},{"location":"#examples","title":"\ud83d\udd26 Examples","text":"<p>We recommend to start with the vignette \"Reading OPUS binary files from Bruker\u00ae spectrometers in R\".</p> <pre><code>library(\"opusreader2\")\n# read a single file (one measurement)\nfile &lt;- opus_test_file()\ndata &lt;- read_opus(dsn = file)\n</code></pre> Reading files in parallel [expand]  If highspeed at data consuming systems matters, we recommend to use the optional but integrated {mirai} backend functionality. This way you can read a massive amount of OPUS files in parallel, benefitting from the underlying Nanomsg Next Generation bindings. This way you can support cluster computing systems, via inter-process communications, TCP or secure TLS. For this, parallel workers need to be registered.  <pre><code>files_1000 &lt;- rep(file, 10000L)\n\nif (!require(\"mirai\")) install.packages(\"mirai\")\n\nlibrary(\"mirai\")\ndaemons(n = 2L, dispatcher = TRUE)\n\ndata &lt;- read_opus(dsn = files_1000, parallel = TRUE)\n</code></pre> Reading files in parallel with progress updates [expand]  If `parallel = TRUE`, progress updates via {progressr} are optionally available  <pre><code>if (!require(\"progressr\")) install.packages(\"progressr\")\nlibrary(\"progressr\")\n\nhandlers(global = TRUE)\nhandlers(\"progress\") # base R progress animation\n\nfile &lt;- opus_test_file()\nfiles_1000 &lt;- rep(file, 1000L)\n\n# read with progress bar\ndata &lt;- read_opus(dsn = files_1000, parallel = TRUE, progress_bar = TRUE)\n</code></pre> Read a single OPUS file [expand] <pre><code>data &lt;- read_opus_single(dsn = file)\n</code></pre>"},{"location":"#how-to-contribute","title":"How to contribute","text":"<p>We strive to have a full-fledged reader of OPUS files that is on par with the commercial reader in the Bruker OPUS software suite. That is an ambitious goal and needs collaborative efforts, from development to in-depth testing with Bruker equipment and measurement software. Therefore, you can help the community in various forms:</p> <ul> <li>submitting issues found and engage in discussions</li> <li>help us decode, implement and document the remaining bit of parameter and data blocks in OPUS files</li> <li>share novel insights from new Bruker devices and setting in your laboratories</li> <li>fund further development, even if it's just a coffee donation</li> </ul> <p>We like the spirit of open source development, so any constructive suggestions or questions are always welcome. To trade off the consistency and quality of code with the drive for innovation, we are following some best practices (which can be indeed improved, as many other things in life). These are:</p> <ul> <li>Code checks (linting), styling, and spell checking: We use the pre-commit framework with both some generic coding and R specific hooks configured in <code>.pre-commit-config.yaml</code>. Generally, we follow the tidyverse style guide, with slight exceptions. To provide auto-fixing in PRs where possible, we rely on pre-commit.ci lite.</li> </ul> Install and enable pre-commit hooks locally (details)  1.  install pre-commit with python3. For more details and options, see [the official documentation](https://pre-commit.com/)  <pre><code># in terminal\npip3 install pre-commit --user\n</code></pre>  2.  enable the pre-commit hooks in `.pre-commit-config.yaml`  <pre><code># change to cloned git directory of your fork of the package\npre-commit install\n</code></pre>  Once you do a `git commit -m \"\"`, the defined pre-commit hooks will automatically be applied on new commits.   Check all files for which pre-commit hooks are configured (details) <pre><code># in your terminal and package root directory\npre-commit run --all-files\n</code></pre>"},{"location":"#performance-benchmarking","title":"Performance benchmarking","text":"<pre><code>git clone ssh://git@codefloe.com/spectral-cockpit/opusreader2.git\ncd opusreader2\nhyperfine --warmup 3 --min-runs 5 ./inst/scripts/benchmark_read_opus_parallel.sh --show-output\n</code></pre>"},{"location":"#organizations-and-projects-using-opusreader2","title":"Organizations and projects using {opusreader2}","text":"<p>As far as we know, the following organizations and projects use our package. Please make a pull request if you want to be listed here.</p> <ul> <li>CSIRO</li> <li>Open Soil Spectral Library</li> <li>ETH Z\u00fcrich: Sustainable Agroecosystems group and Soil Resources group</li> <li>NOAA Fisheries AFSC Age and Growth Program</li> <li>National Cooperative Soil Survey</li> <li>B\u00fcchi Labortechnik</li> </ul>"},{"location":"#background","title":"Background","text":"<p>This package is a major rework of {opusreader} made by Pierre Roudier and Philipp Baumann.  This precessor package relies on an interesting but not optimal reverse engineered logic. Particularly, the assignment of spectral data types (i.e., single channel reflectance vs. final result spectrum), was buggy because the CO2 peak ratio was used as a heuristic. Also, byte offsets from three letter strings were directly used to read specific data and assign block types.</p> <p>The new package parses the file header for assigning spectral blocks.</p>"},{"location":"#credits","title":"Credits","text":"<ul> <li>Pierre Roudier and Philipp Baumann made an improved R reader, further developing the version in simplerspec by Philipp. https://github.com/pierreroudier/opusreader</li> <li>QED.ai: implemented a python parser which takes the main the logic of ono. https://github.com/qedsoftware/brukeropusreader</li> <li>twagner: wrote a OPUS FTIR clone called ono. Original decrypter of the header. https://pypi.org/project/ono/</li> <li>Andrew Sila and Tomislav Hengl: wrote a first OPUS reader in R. https://github.com/cran/soil.spec/blob/master/R/read.opus.R</li> </ul>"},{"location":"CHANGELOG/","title":"opusreader2 0.6.8 (2026-01-29)","text":""},{"location":"CHANGELOG/#maintenance","title":"Maintenance","text":"<ul> <li>Address 2 CRAN pre-test NOTES after 0.6.7 resubmission #165 (649417f)</li> <li><code>DESCRIPTION</code>: added disclaimer and registered trademark statements</li> <li>fix non-standard file/directory NOTE for <code>./jarl.toml</code>, which was added in     version 0.6.7</li> </ul>"},{"location":"CHANGELOG/#opusreader2-067-2026-01-28","title":"opusreader2 0.6.7 (2026-01-28)","text":""},{"location":"CHANGELOG/#maintenance_1","title":"Maintenance","text":"<ul> <li>Address CRAN comments after initial submission ()</li> <li><code>DESCRIPTION</code>: improve what package does and how it is useful</li> <li><code>print.list_opusreader2()</code>: add return value</li> <li><code>read_opus_single()</code>: add return value</li> </ul>"},{"location":"CHANGELOG/#opusreader2-066-2026-01-14","title":"opusreader2 0.6.6 (2026-01-14)","text":""},{"location":"CHANGELOG/#bug-fixes","title":"Bug Fixes","text":"<ul> <li>move and commit only pages build assets #131 (d46b153)</li> <li><code>parse_opus()</code> now correctly returns class <code>opusreader2</code> (e5cbd51)</li> </ul>"},{"location":"CHANGELOG/#maintenance_2","title":"Maintenance","text":"<ul> <li>fix image paths in vignette #148 (e6f027c)</li> <li>please renovate #147 (de918a4)</li> <li>include vignette images in online docs, include performance benchmarking #145 (10f9082)</li> <li>add benchmarking env #143 (0b06558)</li> <li>simplify motivation #142 (649417f)</li> <li>add git sv config to prepare releases #138 (b07b724)</li> <li>docs: disable language guessing #134 (1a16b8a)</li> <li>fix accessing opus test file (1203bb3)</li> </ul>"},{"location":"CHANGELOG/#documentation","title":"Documentation","text":"<ul> <li>clean up README.md</li> <li>#139 (37d014c)</li> <li>#141 (4b2aab5)</li> </ul>"},{"location":"CHANGELOG/#ci","title":"CI","text":"<ul> <li>use new cr.codefloe.com registries #146 (69ce48d)</li> <li>init pages build #130 (1a5fabf)</li> <li>improve R CMD Check #129 (d7e0de5)</li> </ul>"},{"location":"CHANGELOG/#opusreader2-065-2025-10-14","title":"opusreader2 0.6.5 (2025-10-14)","text":""},{"location":"CHANGELOG/#fixes","title":"Fixes","text":"<ul> <li><code>read_opus()</code>: Fix warning \"unknown timezone 'Etc/GMT+10.5'\", and use one plausible Olson name <code>\"Australia/Adelaide\"</code> to circumvent the message (GH issue #116 by David Benn, CSIRO)</li> </ul>"},{"location":"CHANGELOG/#opusreader2-0649000-2025-09-29","title":"opusreader2 0.6.4.9000 (2025-09-29)","text":""},{"location":"CHANGELOG/#chores","title":"Chores","text":"<ul> <li><code>read_opus()</code>: uniquely use \"mirai\" parallel backend, wipe \"future\". <code>.parallel_backend</code> argument is depreciated without notes (#124)</li> <li><code>README</code>: use<code>opus_test_file()</code> for reading multiple files via mirai backend (#122)</li> </ul>"},{"location":"CHANGELOG/#opusreader2-064-2025-09-24","title":"opusreader2 0.6.4 (2025-09-24)","text":""},{"location":"CHANGELOG/#features","title":"Features","text":"<ul> <li><code>read_opus()</code>: support \"mirai\" async backend. <code>.parallel_backend</code> now defaults to <code>\"mirai\"</code>.</li> </ul>"},{"location":"CHANGELOG/#bug-fixes_1","title":"Bug fixes","text":"<ul> <li><code>read_opus()</code>: consistently assign <code>opusreader2_list</code> class</li> </ul>"},{"location":"CHANGELOG/#chores_1","title":"Chores","text":"<ul> <li><code>opus_lapply()</code>: remove from docs</li> <li>Update vignette with new \"mirai\" parallel interface</li> </ul>"},{"location":"CHANGELOG/#opusreader2-063-2024-03-12","title":"opusreader2 0.6.3 (2024-03-12)","text":""},{"location":"CHANGELOG/#bug-fixes_2","title":"Bug fixes","text":"<ul> <li>fix sample and time metadata parsing for <code>read_opus(dsn, data_only = TRUE)</code>.   Previously, extraction of the timestamp failed and data extracted errored   in that case, because there was the required <code>\"history\"</code> and <code>\"sample\"</code> blocks   weren't extracted temporarily before, as required.   Now, <code>read_opus(dsn, data_only = TRUE)</code> successfully extracts an extra element   <code>basic_metadata</code>, as it does for <code>data_only = FALSE</code> (the default). This extra   information does unlikely to break existing pipeline code that extracts   spectra with {opusreader2}, because it is a nested list element. This patch   release also resolves a warning when parsing time information, that was due to   an extra tab (<code>\"\\t\"</code>) that was present in the history text for specific files.   Thanks @mtalluto for the fix.   Added extra tests to check for errors and warnings in the example files for   both <code>data_only = FALSE</code> and <code>data_only = TRUE</code>).   Thanks to @dylanbeaudette and @esteveze for reporting the failing extraction of metadata.   Issue report: #104.   PR fixed: #105.</li> </ul>"},{"location":"CHANGELOG/#opusreader2-0629000-2023-12-27","title":"opusreader2 0.6.2.9000 (2023-12-27)","text":"<ul> <li>Select 5 OPUS binary files from different instrument types for tests and   vignette ((#103)</li> <li>Update first part of vignette for CRAN (#103).</li> </ul>"},{"location":"CHANGELOG/#opusreader2-062-2023-12-23","title":"opusreader2 0.6.2 (2023-12-23)","text":""},{"location":"CHANGELOG/#bug-fixes_3","title":"Bug fixes","text":"<ul> <li>Hotfix for commit c8ff2cd, which accidentally caused a regression, leading to   issues #101 and   #102.   It was unnoticed but could have been diagnosed with the {testthat} tests in   place. There was also an update of the {tic} template, which did not invoke   tests yet in the continous integration (CI) run (passed because of unconfigured tests).   When restricting relevant export, roxygen2 <code>@export</code> tags were removed and   <code>@internal</code> added for   <code>calc_parameter_chunk_size()</code>, which made those functions unavailable even   internally (<code>\"Error in UseMethod(\"calc_parameter_chunk_size\") : no applicable   method for 'calc_parameter_chunk_size' applied to an object of class \"parameter\")\"</code></li> </ul>"},{"location":"CHANGELOG/#documentation_1","title":"Documentation","text":"<ul> <li><code>read_opus()</code>: in return element <code>ab</code>, state <code>Log10</code> explicitly for calculating   apparent absorbance (#94; @zecoljls).</li> <li>Only export functions relevant to users:</li> <li>core: <code>read_opus()</code>, <code>read_opus_single()</code></li> <li>S3 methods for <code>calc_parameter_chunk_size()</code></li> <li>helpers: <code>opus_file()</code></li> </ul>"},{"location":"CHANGELOG/#opusreader2-061-2023-11-12","title":"opusreader2 0.6.1 (2023-11-12)","text":""},{"location":"CHANGELOG/#opus-data-support","title":"OPUS data support","text":"<ul> <li>Support quality test report (#81). This block can be found in   <code>./inst/extdata/new_data/issue81_A1.1.0</code>. <code>read_opus()</code> returns this   block as <code>\"quality_test_report\"</code> in the list output.</li> </ul>"},{"location":"CHANGELOG/#opusreader2-060-2023-11-12","title":"opusreader2 0.6.0 (2023-11-12)","text":"<ul> <li>Add first unit tests using the {testhat} framework.</li> <li>Allow non-parsable blocks. Add new default so that all blocks that not yet   mapped are showing up as warnings instead of an error. These blocks will be   named as <code>\"unknown\"</code> elements in the output of the <code>read_opus()</code> list.</li> </ul>"},{"location":"CHANGELOG/#opus-data-support_1","title":"OPUS data support","text":"<ul> <li>Internal refactoring (see below) fixes two reading issues:</li> <li><code>./inst/extdata/new_data/issue94_RT_01_1_23-02-21_13-23-54.0</code>:     from Bruker 2023 Alpha II mid-IR spectrometer. Due to internal refactoring     of header parsing (see below) (#94)</li> <li><code>./inst/extdata/new_data/issue82_Opus_test</code>: from Bruker MPA FT-IR     spectrometer. Parse block <code>\"b0-c0-t144-a1\"</code>, text type 144 with special     offset in <code>parse_chunk.parameter()</code>. For now classify this block as block     type <code>\"report_unknown\"</code> (waiting finalize naming until confirmed with     screenshots from the Bruker OPUS sofware). Also fix <code>time_saved</code> by     not relying on language settings (#82)</li> </ul>"},{"location":"CHANGELOG/#internal-refactoring","title":"Internal refactoring","text":"<ul> <li>Simplify header parsing in <code>parse_header()</code>.</li> <li>Work with <code>raw</code> vectors instead of <code>connection</code> objects to read binary data.   Parse <code>raw</code> vectors directly for functions in <code>read_bin_types()</code> and use   subsetting to slice raw vectors in <code>base::readBin()</code> calls instead instead   of <code>seek()</code>, which was used previously to reposition cursors in raw   <code>connection</code>s.</li> <li><code>get_meta_timestamp()</code>: omit language dependent logic using <code>\"time saved\"</code>   regular expressions for matching time saved from history block. The first   time of sorted <code>POSIXct</code> candidates will be returned as time saved.</li> </ul>"},{"location":"CHANGELOG/#opusreader2-0509000-2023-06-05","title":"opusreader2 0.5.0.9000 (2023-06-05)","text":"<ul> <li>implement a <code>basic_metadata</code> list element for \"opusreader2\" class containing key metadata  (#85)</li> </ul>"},{"location":"CHANGELOG/#opusreader2-050-2023-06-03","title":"opusreader2 0.5.0 (2023-06-03)","text":"<ul> <li> <p>Name first level of list (class <code>\"list_opusreader2\"</code>) with base file name of given data source name (DSN) (#83)</p> </li> <li> <p>Fix <code>\"list_opusreader2\"</code> indenting when reading files in parallel (#80)</p> </li> <li> <p>Add support for progress bars in <code>read_opus()</code> (#75)</p> </li> <li> <p>Introduce type-stable classes for <code>read_opus()</code> and <code>read_opus_single()</code> output  (#72):</p> </li> <li>classes \"list_opusreader2\" and \"opusreader2\"</li> </ul>"},{"location":"CHANGELOG/#opusreader2-041-2023-03-19","title":"opusreader2 0.4.1 (2023-03-19)","text":"<ul> <li>patch when <code>read_opus(..., parallel = TRUE)</code>: unlist resulting list one level (chunk level); #80.</li> </ul>"},{"location":"CHANGELOG/#opusreader2-040-2023-03-14","title":"opusreader2 0.4.0 (2023-03-14)","text":"<ul> <li>Feature progress bar for <code>read_opus()</code> when reading multiple files in parallel #75.</li> </ul>"},{"location":"CHANGELOG/#opusreader2-030-2023-02-16","title":"opusreader2 0.3.0 (2023-02-16)","text":"<ul> <li>The exported functions are now (#74):<ul> <li><code>read_opus()</code>: Read one or more OPUS files from data source name (<code>dsn</code>)</li> <li><code>read_opus_single()</code>: Read a single OPUS file</li> <li><code>calc_parameter_chunk_size()</code>: Calculate the parameter chunk size in bytes</li> </ul> </li> </ul>"},{"location":"CHANGELOG/#opusreader2-020-2023-02-15","title":"opusreader2 0.2.0 (2023-02-15)","text":"<ul> <li>Introduce new S3 classes for the main functions exported (#72):<ul> <li><code>read_opus()</code>: S3 class <code>c(\"list_opusreader2\", \"list\")</code></li> <li><code>read_opus_single()</code>: S3 class <code>c(\"opusreader2\", \"list\")</code></li> </ul> </li> </ul>"},{"location":"CHANGELOG/#opusreader2-010-2023-02-08","title":"opusreader2 0.1.0 (2023-02-08)","text":""},{"location":"CHANGELOG/#refactoring","title":"Refactoring","text":"<ul> <li> <p>Internal refactoring (<code>R/create_dataset.R</code>). Implement a new key-value mapping   logic for assigning the integer coded header information. The new order in the   (composite) key strings follows the sequence of block, channel, text and   additional type information. The better line-by-line layout of composite   keys and mapped information types simplifies the detection of new kind of   spectral data and parameters that are encoded in header entries (#60).</p> </li> <li> <p>Introduce consistent and proactive error reporting when a composite key in   are not yet mapped because they are not yet known (<code>R/create_dataset.R</code>).   This error message includes a recipe how to report new OPUS files with yet   unsupported block types (i.e. new instrument features) for {opusreader2}.   Together with the composite key generated from the respective the header   entry, a step-by-step reporting as GitHub issue is proposed. (#60)</p> </li> </ul>"},{"location":"CHANGELOG/#opusreader2-0009002-2022-12-23","title":"opusreader2 0.0.0.9002 (2022-12-23)","text":""},{"location":"CHANGELOG/#documentation_2","title":"Documentation","text":"<ul> <li>Update return value of parsed OPUS spectral blocks in <code>parse_opus()</code></li> </ul>"},{"location":"CHANGELOG/#opusreader2-0009001-2022-12-18","title":"opusreader2 0.0.0.9001 (2022-12-18)","text":"<p>Start versioning with {fledge}.</p> <p>spectral-cockpit.com proudly introduces {opusreader2} to read binary files from FT-IR devices from Bruker Optics GmbH &amp; Co in R. It is a powerhouse that fuels speedy extract-transform-load (ETL) data pipelines in spectroscopy applications. You can continue using state-of-the-art commercial devices for what they are good at: measurements. Meanwhile, you can rely on open source technology and trans-disciplinary knowledge to design data processes, and make best use of the spectroscopic source of information.</p> <p>{opusreader2} parses and decodes the at first glance puzzling file header first. The implementation then uses this mapped information as a recipe to read particular data types from different blocks. Specific byte chunks to be interpreted are defined by position (offset), read length, bytes per element, and type (e.g., string, float). With this, all the data can be read and parsed. We mitigate lock-in at file level. Hence we foster reproducible and trustworthy processes in spectral workflows. Nowadays, the new business logic is being more and more transparent in code, methods used and services offered. Tightly link and make input data, metadata and outcomes available for economical scaling-up of diagnostics.</p> <ul> <li>Extract, transform and load data directly from OPUS binary files</li> </ul> <p>Providing the data and metadata from measurements connects downstream tasks in order to make IR spectroscopy a ready-made, automatec for diagnostics and monitoring (platform):</p> <ul> <li>Quality control of measurements; monitoring workflow and metadata</li> <li>Continuous spectroscopic diagnostics (data processing, model development,   inspection, adaption, prediction, and validation). Use MLOps principles.</li> </ul> <p>With our package you can directly read and parse from binary files without compromising a single bit of precious information saved in these filled OPUS binary files.</p> <p><code>read_opus()</code> is the main function exposed that reads and parses OPUS binary files from various data sources names (dsn). Currently, we support the following <code>dsn</code> types:</p> <ul> <li>files(s): character vector with one path to OPUS file or multiple paths to   individual OPUS files</li> <li>folder: character of length 1 with path to folder with OPUS files to be read   recursively. Only reads OPUS files with <code>.&lt;integer&gt;</code> extension (Usually   starting from <code>.0</code> for unique sample names per measurement.</li> </ul> <p>File names of OPUS files can possibly include plate positions that are postfixed to the sample names. This is an option in OPUSLab. Kindly note that the associated metadata (sample name/ID) and plate position are also stored internally so that file name changes after measurement could be tracked.</p> <p><code>read_opus</code> offers four arguments:</p> <ul> <li><code>dsn</code>: data source name</li> <li><code>data_only</code>: switch to extract only spectral data blocks without additional    information like measurement parameters or environmental conditions.</li> <li><code>parallel</code>: not enabled by default. Speed up reads of 1000s of files by    chunking list of files across parallel workers. Cross-platform via unified    {future} framework in R.</li> <li><code>progress_bar</code>: optionally show interactive progress bar for single-threaded   or asynchronous reads.</li> </ul> <p>The interface is minimal and the job of the generic reader function is well defined by design. This is to make maintenance easy and to avoid breaking changes in future releases of the package. We importantly avoid feature overload like this. We plan to release specific helper and wrapper functions that can come in handy for tailored uses and diagnostic environments. They may also extract or post-process spectroscopic data and metadata pipelines. Check out more soon in future releases.</p>"},{"location":"CITATION/","title":"Citation","text":"<p>To cite package \u2018opusreader2\u2019 in publications use:</p> <p>Baumann P, Knecht T, Roudier P (2026). opusreader2: Read Spectroscopic Data from Bruker OPUS Binary Files. R package version 0.6.8, https://opusreader2.spectral-cockpit.codefloe.page/.  </p>"},{"location":"LICENSE/","title":"LICENSE","text":"<p>COPYRIGHT HOLDER: opusreader2 authors</p>"},{"location":"NEWS/","title":"opusreader2 0.6.8 (2026-01-29)","text":""},{"location":"NEWS/#maintenance","title":"Maintenance","text":"<ul> <li>Address 2 CRAN pre-test NOTES after 0.6.7 resubmission #165 (649417f)</li> <li><code>DESCRIPTION</code>: added disclaimer and registered trademark statements</li> <li>fix non-standard file/directory NOTE for <code>./jarl.toml</code>, which was added in     version 0.6.7</li> </ul>"},{"location":"NEWS/#opusreader2-067-2026-01-28","title":"opusreader2 0.6.7 (2026-01-28)","text":""},{"location":"NEWS/#maintenance_1","title":"Maintenance","text":"<ul> <li>Address CRAN comments after initial submission ()</li> <li><code>DESCRIPTION</code>: improve what package does and how it is useful</li> <li><code>print.list_opusreader2()</code>: add return value</li> <li><code>read_opus_single()</code>: add return value</li> </ul>"},{"location":"NEWS/#opusreader2-066-2026-01-14","title":"opusreader2 0.6.6 (2026-01-14)","text":""},{"location":"NEWS/#bug-fixes","title":"Bug Fixes","text":"<ul> <li>move and commit only pages build assets #131 (d46b153)</li> <li><code>parse_opus()</code> now correctly returns class <code>opusreader2</code> (e5cbd51)</li> </ul>"},{"location":"NEWS/#maintenance_2","title":"Maintenance","text":"<ul> <li>fix image paths in vignette #148 (e6f027c)</li> <li>please renovate #147 (de918a4)</li> <li>include vignette images in online docs, include performance benchmarking #145 (10f9082)</li> <li>add benchmarking env #143 (0b06558)</li> <li>simplify motivation #142 (649417f)</li> <li>add git sv config to prepare releases #138 (b07b724)</li> <li>docs: disable language guessing #134 (1a16b8a)</li> <li>fix accessing opus test file (1203bb3)</li> </ul>"},{"location":"NEWS/#documentation","title":"Documentation","text":"<ul> <li>clean up README.md</li> <li>#139 (37d014c)</li> <li>#141 (4b2aab5)</li> </ul>"},{"location":"NEWS/#ci","title":"CI","text":"<ul> <li>use new cr.codefloe.com registries #146 (69ce48d)</li> <li>init pages build #130 (1a5fabf)</li> <li>improve R CMD Check #129 (d7e0de5)</li> </ul>"},{"location":"NEWS/#opusreader2-065-2025-10-14","title":"opusreader2 0.6.5 (2025-10-14)","text":""},{"location":"NEWS/#fixes","title":"Fixes","text":"<ul> <li><code>read_opus()</code>: Fix warning \"unknown timezone 'Etc/GMT+10.5'\", and use one plausible Olson name <code>\"Australia/Adelaide\"</code> to circumvent the message (GH issue #116 by David Benn, CSIRO)</li> </ul>"},{"location":"NEWS/#opusreader2-0649000-2025-09-29","title":"opusreader2 0.6.4.9000 (2025-09-29)","text":""},{"location":"NEWS/#chores","title":"Chores","text":"<ul> <li><code>read_opus()</code>: uniquely use \"mirai\" parallel backend, wipe \"future\". <code>.parallel_backend</code> argument is depreciated without notes (#124)</li> <li><code>README</code>: use<code>opus_test_file()</code> for reading multiple files via mirai backend (#122)</li> </ul>"},{"location":"NEWS/#opusreader2-064-2025-09-24","title":"opusreader2 0.6.4 (2025-09-24)","text":""},{"location":"NEWS/#features","title":"Features","text":"<ul> <li><code>read_opus()</code>: support \"mirai\" async backend. <code>.parallel_backend</code> now defaults to <code>\"mirai\"</code>.</li> </ul>"},{"location":"NEWS/#bug-fixes_1","title":"Bug fixes","text":"<ul> <li><code>read_opus()</code>: consistently assign <code>opusreader2_list</code> class</li> </ul>"},{"location":"NEWS/#chores_1","title":"Chores","text":"<ul> <li><code>opus_lapply()</code>: remove from docs</li> <li>Update vignette with new \"mirai\" parallel interface</li> </ul>"},{"location":"NEWS/#opusreader2-063-2024-03-12","title":"opusreader2 0.6.3 (2024-03-12)","text":""},{"location":"NEWS/#bug-fixes_2","title":"Bug fixes","text":"<ul> <li>fix sample and time metadata parsing for <code>read_opus(dsn, data_only = TRUE)</code>.   Previously, extraction of the timestamp failed and data extracted errored   in that case, because there was the required <code>\"history\"</code> and <code>\"sample\"</code> blocks   weren't extracted temporarily before, as required.   Now, <code>read_opus(dsn, data_only = TRUE)</code> successfully extracts an extra element   <code>basic_metadata</code>, as it does for <code>data_only = FALSE</code> (the default). This extra   information does unlikely to break existing pipeline code that extracts   spectra with {opusreader2}, because it is a nested list element. This patch   release also resolves a warning when parsing time information, that was due to   an extra tab (<code>\"\\t\"</code>) that was present in the history text for specific files.   Thanks @mtalluto for the fix.   Added extra tests to check for errors and warnings in the example files for   both <code>data_only = FALSE</code> and <code>data_only = TRUE</code>).   Thanks to @dylanbeaudette and @esteveze for reporting the failing extraction of metadata.   Issue report: #104.   PR fixed: #105.</li> </ul>"},{"location":"NEWS/#opusreader2-0629000-2023-12-27","title":"opusreader2 0.6.2.9000 (2023-12-27)","text":"<ul> <li>Select 5 OPUS binary files from different instrument types for tests and   vignette ((#103)</li> <li>Update first part of vignette for CRAN (#103).</li> </ul>"},{"location":"NEWS/#opusreader2-062-2023-12-23","title":"opusreader2 0.6.2 (2023-12-23)","text":""},{"location":"NEWS/#bug-fixes_3","title":"Bug fixes","text":"<ul> <li>Hotfix for commit c8ff2cd, which accidentally caused a regression, leading to   issues #101 and   #102.   It was unnoticed but could have been diagnosed with the {testthat} tests in   place. There was also an update of the {tic} template, which did not invoke   tests yet in the continous integration (CI) run (passed because of unconfigured tests).   When restricting relevant export, roxygen2 <code>@export</code> tags were removed and   <code>@internal</code> added for   <code>calc_parameter_chunk_size()</code>, which made those functions unavailable even   internally (<code>\"Error in UseMethod(\"calc_parameter_chunk_size\") : no applicable   method for 'calc_parameter_chunk_size' applied to an object of class \"parameter\")\"</code></li> </ul>"},{"location":"NEWS/#documentation_1","title":"Documentation","text":"<ul> <li><code>read_opus()</code>: in return element <code>ab</code>, state <code>Log10</code> explicitly for calculating   apparent absorbance ([#94](/issues/94); @zecoljls).</li> <li>Only export functions relevant to users:</li> <li>core: <code>read_opus()</code>, <code>read_opus_single()</code></li> <li>S3 methods for <code>calc_parameter_chunk_size()</code></li> <li>helpers: <code>opus_file()</code></li> </ul>"},{"location":"NEWS/#opusreader2-061-2023-11-12","title":"opusreader2 0.6.1 (2023-11-12)","text":""},{"location":"NEWS/#opus-data-support","title":"OPUS data support","text":"<ul> <li>Support quality test report (#81). This block can be found in   <code>./inst/extdata/new_data/issue81_A1.1.0</code>. <code>read_opus()</code> returns this   block as <code>\"quality_test_report\"</code> in the list output.</li> </ul>"},{"location":"NEWS/#opusreader2-060-2023-11-12","title":"opusreader2 0.6.0 (2023-11-12)","text":"<ul> <li>Add first unit tests using the {testhat} framework.</li> <li>Allow non-parsable blocks. Add new default so that all blocks that not yet   mapped are showing up as warnings instead of an error. These blocks will be   named as <code>\"unknown\"</code> elements in the output of the <code>read_opus()</code> list.</li> </ul>"},{"location":"NEWS/#opus-data-support_1","title":"OPUS data support","text":"<ul> <li>Internal refactoring (see below) fixes two reading issues:</li> <li><code>./inst/extdata/new_data/issue94_RT_01_1_23-02-21_13-23-54.0</code>:     from Bruker 2023 Alpha II mid-IR spectrometer. Due to internal refactoring     of header parsing (see below) (#94)</li> <li><code>./inst/extdata/new_data/issue82_Opus_test</code>: from Bruker MPA FT-IR     spectrometer. Parse block <code>\"b0-c0-t144-a1\"</code>, text type 144 with special     offset in <code>parse_chunk.parameter()</code>. For now classify this block as block     type <code>\"report_unknown\"</code> (waiting finalize naming until confirmed with     screenshots from the Bruker OPUS sofware). Also fix <code>time_saved</code> by     not relying on language settings (#82)</li> </ul>"},{"location":"NEWS/#internal-refactoring","title":"Internal refactoring","text":"<ul> <li>Simplify header parsing in <code>parse_header()</code>.</li> <li>Work with <code>raw</code> vectors instead of <code>connection</code> objects to read binary data.   Parse <code>raw</code> vectors directly for functions in <code>read_bin_types()</code> and use   subsetting to slice raw vectors in <code>base::readBin()</code> calls instead instead   of <code>seek()</code>, which was used previously to reposition cursors in raw   <code>connection</code>s.</li> <li><code>get_meta_timestamp()</code>: omit language dependent logic using <code>\"time saved\"</code>   regular expressions for matching time saved from history block. The first   time of sorted <code>POSIXct</code> candidates will be returned as time saved.</li> </ul>"},{"location":"NEWS/#opusreader2-0509000-2023-06-05","title":"opusreader2 0.5.0.9000 (2023-06-05)","text":"<ul> <li>implement a <code>basic_metadata</code> list element for \"opusreader2\" class containing key metadata  (#85)</li> </ul>"},{"location":"NEWS/#opusreader2-050-2023-06-03","title":"opusreader2 0.5.0 (2023-06-03)","text":"<ul> <li> <p>Name first level of list (class <code>\"list_opusreader2\"</code>) with base file name of given data source name (DSN) (#83)</p> </li> <li> <p>Fix <code>\"list_opusreader2\"</code> indenting when reading files in parallel (#80)</p> </li> <li> <p>Add support for progress bars in <code>read_opus()</code> (#75)</p> </li> <li> <p>Introduce type-stable classes for <code>read_opus()</code> and <code>read_opus_single()</code> output  (#72):</p> </li> <li>classes \"list_opusreader2\" and \"opusreader2\"</li> </ul>"},{"location":"NEWS/#opusreader2-041-2023-03-19","title":"opusreader2 0.4.1 (2023-03-19)","text":"<ul> <li>patch when <code>read_opus(..., parallel = TRUE)</code>: unlist resulting list one level (chunk level); [#80](/issues/80).</li> </ul>"},{"location":"NEWS/#opusreader2-040-2023-03-14","title":"opusreader2 0.4.0 (2023-03-14)","text":"<ul> <li>Feature progress bar for <code>read_opus()</code> when reading multiple files in parallel [#75](/issues/75).</li> </ul>"},{"location":"NEWS/#opusreader2-030-2023-02-16","title":"opusreader2 0.3.0 (2023-02-16)","text":"<ul> <li>The exported functions are now (#74):<ul> <li><code>read_opus()</code>: Read one or more OPUS files from data source name (<code>dsn</code>)</li> <li><code>read_opus_single()</code>: Read a single OPUS file</li> <li><code>calc_parameter_chunk_size()</code>: Calculate the parameter chunk size in bytes</li> </ul> </li> </ul>"},{"location":"NEWS/#opusreader2-020-2023-02-15","title":"opusreader2 0.2.0 (2023-02-15)","text":"<ul> <li>Introduce new S3 classes for the main functions exported (#72):<ul> <li><code>read_opus()</code>: S3 class <code>c(\"list_opusreader2\", \"list\")</code></li> <li><code>read_opus_single()</code>: S3 class <code>c(\"opusreader2\", \"list\")</code></li> </ul> </li> </ul>"},{"location":"NEWS/#opusreader2-010-2023-02-08","title":"opusreader2 0.1.0 (2023-02-08)","text":""},{"location":"NEWS/#refactoring","title":"Refactoring","text":"<ul> <li> <p>Internal refactoring (<code>R/create_dataset.R</code>). Implement a new key-value mapping   logic for assigning the integer coded header information. The new order in the   (composite) key strings follows the sequence of block, channel, text and   additional type information. The better line-by-line layout of composite   keys and mapped information types simplifies the detection of new kind of   spectral data and parameters that are encoded in header entries (#60).</p> </li> <li> <p>Introduce consistent and proactive error reporting when a composite key in   are not yet mapped because they are not yet known (<code>R/create_dataset.R</code>).   This error message includes a recipe how to report new OPUS files with yet   unsupported block types (i.e. new instrument features) for {opusreader2}.   Together with the composite key generated from the respective the header   entry, a step-by-step reporting as GitHub issue is proposed. (#60)</p> </li> </ul>"},{"location":"NEWS/#opusreader2-0009002-2022-12-23","title":"opusreader2 0.0.0.9002 (2022-12-23)","text":""},{"location":"NEWS/#documentation_2","title":"Documentation","text":"<ul> <li>Update return value of parsed OPUS spectral blocks in <code>parse_opus()</code></li> </ul>"},{"location":"NEWS/#opusreader2-0009001-2022-12-18","title":"opusreader2 0.0.0.9001 (2022-12-18)","text":"<p>Start versioning with {fledge}.</p> <p>spectral-cockpit.com proudly introduces {opusreader2} to read binary files from FT-IR devices from Bruker Optics GmbH &amp; Co in R. It is a powerhouse that fuels speedy extract-transform-load (ETL) data pipelines in spectroscopy applications. You can continue using state-of-the-art commercial devices for what they are good at: measurements. Meanwhile, you can rely on open source technology and trans-disciplinary knowledge to design data processes, and make best use of the spectroscopic source of information.</p> <p>{opusreader2} parses and decodes the at first glance puzzling file header first. The implementation then uses this mapped information as a recipe to read particular data types from different blocks. Specific byte chunks to be interpreted are defined by position (offset), read length, bytes per element, and type (e.g., string, float). With this, all the data can be read and parsed. We mitigate lock-in at file level. Hence we foster reproducible and trustworthy processes in spectral workflows. Nowadays, the new business logic is being more and more transparent in code, methods used and services offered. Tightly link and make input data, metadata and outcomes available for economical scaling-up of diagnostics.</p> <ul> <li>Extract, transform and load data directly from OPUS binary files</li> </ul> <p>Providing the data and metadata from measurements connects downstream tasks in order to make IR spectroscopy a ready-made, automatec for diagnostics and monitoring (platform):</p> <ul> <li>Quality control of measurements; monitoring workflow and metadata</li> <li>Continuous spectroscopic diagnostics (data processing, model development,   inspection, adaption, prediction, and validation). Use MLOps principles.</li> </ul> <p>With our package you can directly read and parse from binary files without compromising a single bit of precious information saved in these filled OPUS binary files.</p> <p><code>read_opus()</code> is the main function exposed that reads and parses OPUS binary files from various data sources names (dsn). Currently, we support the following <code>dsn</code> types:</p> <ul> <li>files(s): character vector with one path to OPUS file or multiple paths to   individual OPUS files</li> <li>folder: character of length 1 with path to folder with OPUS files to be read   recursively. Only reads OPUS files with <code>.&lt;integer&gt;</code> extension (Usually   starting from <code>.0</code> for unique sample names per measurement.</li> </ul> <p>File names of OPUS files can possibly include plate positions that are postfixed to the sample names. This is an option in OPUSLab. Kindly note that the associated metadata (sample name/ID) and plate position are also stored internally so that file name changes after measurement could be tracked.</p> <p><code>read_opus</code> offers four arguments:</p> <ul> <li><code>dsn</code>: data source name</li> <li><code>data_only</code>: switch to extract only spectral data blocks without additional    information like measurement parameters or environmental conditions.</li> <li><code>parallel</code>: not enabled by default. Speed up reads of 1000s of files by    chunking list of files across parallel workers. Cross-platform via unified    {future} framework in R.</li> <li><code>progress_bar</code>: optionally show interactive progress bar for single-threaded   or asynchronous reads.</li> </ul> <p>The interface is minimal and the job of the generic reader function is well defined by design. This is to make maintenance easy and to avoid breaking changes in future releases of the package. We importantly avoid feature overload like this. We plan to release specific helper and wrapper functions that can come in handy for tailored uses and diagnostic environments. They may also extract or post-process spectroscopic data and metadata pipelines. Check out more soon in future releases.</p>"},{"location":"man/opus_test_dsn/","title":"Get File Paths of Sample OPUS Files Included in the Package","text":""},{"location":"man/opus_test_dsn/#description","title":"Description","text":"<p>Utility function that retrieves the location of the sample OPUS binary file on disk.</p>"},{"location":"man/opus_test_dsn/#usage","title":"Usage","text":"<pre><code>opus_test_dsn()\n</code></pre>"},{"location":"man/opus_test_dsn/#value","title":"Value","text":"<p>a character vector with the paths OPUS files included in the package</p>"},{"location":"man/opus_test_dsn/#examples","title":"Examples","text":"<pre><code>library(\"opusreader2\")\n\n(dsn &lt;- opus_test_dsn())\n</code></pre> <pre><code>[1] \"/nix/store/k34a8c73ngaassm1cbiryh5wqdz8p0g5-r-altdoc-0.7.0/library/opusreader2/extdata/test_data\"\n</code></pre>"},{"location":"man/opus_test_file/","title":"Get path of a Selected Sample OPUS File Included in the Package","text":""},{"location":"man/opus_test_file/#description","title":"Description","text":"<p>Utility function that retrieves the location of the sample OPUS binary file on disk.</p>"},{"location":"man/opus_test_file/#usage","title":"Usage","text":"<pre><code>opus_test_file()\n</code></pre>"},{"location":"man/opus_test_file/#value","title":"Value","text":"<p>a character vector with the path to a selected single sample OPUS file</p>"},{"location":"man/opus_test_file/#examples","title":"Examples","text":"<pre><code>library(\"opusreader2\")\n\n(fn &lt;- opus_test_file())\n</code></pre> <pre><code>[1] \"/nix/store/k34a8c73ngaassm1cbiryh5wqdz8p0g5-r-altdoc-0.7.0/library/opusreader2/extdata/test_data/test_spectra.0\"\n</code></pre>"},{"location":"man/print.list_opusreader2/","title":"Print method for collection of OPUS spectra with class <code>list_opusreader2</code>","text":""},{"location":"man/print.list_opusreader2/#description","title":"Description","text":"<p>Print method for collection of OPUS spectra with class <code>list_opusreader2</code></p>"},{"location":"man/print.list_opusreader2/#usage","title":"Usage","text":"<pre><code>## S3 method for class 'list_opusreader2'\nprint(x, ...)\n</code></pre>"},{"location":"man/print.list_opusreader2/#arguments","title":"Arguments","text":"<code>x</code>  List with OPUS spectra collection of class <code>list_opusreader2</code> <code>\u2026</code>  Additional arguments passed to print method"},{"location":"man/print.list_opusreader2/#value","title":"Value","text":"<p>Returns <code>x</code> invisibly.</p>"},{"location":"man/read_opus/","title":"Read OPUS binary files from Bruker spectrometers","text":""},{"location":"man/read_opus/#description","title":"Description","text":"<p>Read and parse OPUS files with spectral data from individual measurements</p>"},{"location":"man/read_opus/#usage","title":"Usage","text":"<pre><code>read_opus(dsn, data_only = FALSE, parallel = FALSE, progress_bar = FALSE)\n</code></pre>"},{"location":"man/read_opus/#arguments","title":"Arguments","text":"<code>dsn</code>  data source name. Can be a path to a specific file or a path to a directory. The listing of the files in a directory is recursive.  <code>data_only</code>  read data and parameters with <code>FALSE</code> per default, or only read data <code>NULL</code>, which only returns the parsed data.  <code>parallel</code>  read files in parallel via <code>\u201cmirai\u201d</code> (non-blocking parallel map). Default is <code>FALSE</code>. See section \"Details\" for more information.  <code>progress_bar</code>  print a progress bar. Default is <code>FALSE</code>."},{"location":"man/read_opus/#value","title":"Value","text":"<p>List with OPUS spectra collection of class <code>list_opusreader2</code>. The individual elements are individual sample measurement data extracted from the corresponding OPUS binary files, as parsed from the encoded data blocks.</p> <p>Each element in <code>list_opusreader2</code> contains metadata and measurement data equivalent to their names displayed in the Bruker OPUS viewer software. However, we used snake_case and standardized the naming for better output handling.</p> <p>Each parsed block element is a sublist that contains</p> <p>1. the binary read instructions decoded/derived from the header (<code>$block_type</code>, <code>$channel_type</code>, <code>$text_type</code> and <code>$additional_type</code>, <code>$offset</code> (bytes), <code>$next_offset</code> (bytes), <code>$chunk_size</code> (bytes)).</p> <p>2. if parameter block, nested list of specific parameters under <code>$parameters</code>, which has elements named according to capitalized Bruker-internal \"three-letter-string\" definitions (e.g., \"DPF := Data Point Format\").</p> <p>Possible first-level block names and information provided include:</p> <ul> <li> <code>refl_no_atm_comp_data_param</code> : class <code>parameter</code> (viewer: \"Data Parameters Refl\". Parameter list with metadata for <code>refl</code> data block (<code>refl</code>).  </li> <li> <code>refl_no_atm_comp</code>: class <code>data</code> (spectrum; viewer: \"Refl\"). Unprocessed (raw; i.e, not atmospherically compensated) reflectance spectra (<code>:= sc_sample / sc_ref</code>). Note that this element is the untreated spectra before an eventual \"atmospheric compensation\" routine is applied.  </li> <li> <code>refl_data_param</code> : class <code>parameter</code> (viewer: \"Data Parameters Refl\"). Parameter list with metadata for <code>refl</code> data block (metadata of reflectance spectrum; see <code>refl</code> output). Note that this element only results if \"atmospheric compensation\" was activated in the OPUS measurement settings.  </li> <li> <code>refl</code>: class <code>data</code> (spectrum; viewer: \"Refl\"). Atmospherically compensated reflectance spectra (<code>:= sc_sample_corr / sc_ref_corr</code>). This result spectrum only exists if either correction of CO2 and/or water vapour bands is set in OPUS setting (proprietary algorithm; could possibly be reverse engineered). If <code>refl</code> exists, it has always a corresponding untreated <code>refl_no_atm_comp</code> spectrum (the latter present in file but not shown in the OPUS viewer, where only (final) <code>ab</code> is displayed)  </li> <li> <code>quant_report_refl</code>: class <code>parameter</code> (viewer: \"Quant Report Refl\"). Quantification report for tools of multivariate calibration on <code>refl</code> data (i.e., PLS regression) offered in the QUANT2 OPUS package. Nested list with Bruker-internal \"three-letter-string\" definitions. \"TIT\" is the title of a nested quantification table, <code>\u201cE\\\\[2\\]\u201d stands probably for entry, <code>\u201cF\\\\[2\\]\u201d for field, and <code>\u201cZ\\\\[2\\]\u201d we do not yet know what it maps to. There seems more information needed, which we can get by expanding the header parsing algorithm.   <li> <code>ab_no_atm_comp_data_param</code> : class <code>parameter</code> (viewer: \"Data Parameters AB\"). Parameter list with metadata for <code>ab</code> data block (spectrum; see <code>ab</code> output).  </li> <li> <code>ab_no_atm_comp</code>: class <code>data</code> (spectrum; viewer: \"Refl\"). Unprocessed (raw; i.e, not atmospherically compensated) reflectance spectra (<code>:= sc_sample/ sc_ref</code>).  </li> <li> <code>ab_data_param</code> : class <code>parameter</code> (viewer: \"Data Parameters Refl\"). Parameter list with metadata for <code>ab</code> data block (spectrum; see <code>ab</code>). Note that this element only results if \"atmospheric compensation\" was activated in the OPUS measurement settings.  </li> <li> <code>ab</code>: class <code>data</code> (spectrum; viewer: \"AB\"). Atmospherically compensated (apparent) absorbance spectra (<code>:= log10(1 / (sc_sample_corr / sc_ref_corr)</code>). Only exists if either correction of CO2 and/or water vapour bands is set in OPUS setting (proprietary algorithm; could possibly be reverse engineered). If <code>AB</code> exists, it has always a corresponding untreated <code>ab_no_atm_comp</code> spectrum (the latter present in file but not shown in the OPUS viewer, where only final <code>ab</code> is displayed).  </li> <li> <code>quant_report_ab</code>: class <code>parameter</code> (viewer: \"Quant Report AB\"). Quantification report for tools of multivariate calibration on <code>ab</code> data (i.e., PLS regression) offered in the QUANT2 OPUS package. Nested list with Bruker-internal \"three-letter-string\" definitions. \"TIT\" is the title of a nested quantification table, <code>\u201cE\\\\[2\\]\u201d stands probably for entry, <code>\u201cF\\\\[2\\]\u201d for field, and <code>\u201cZ\\\\[2\\]\u201d we do not yet know what it maps to. There seems more information needed, which we can get by expanding the header parsing algorithm.   <li> <code>sc_sample_data_param</code>: class <code>parameter</code> (metadata; viewer: \"Data Parameters ScSm\"). Describes the <code>sc_sample</code> data block (see <code>sc_sample</code>).  </li> <li> <code>sc_sample</code>: class <code>data</code> (spectrum). Single channel (sc) spectrum of the sample (y-axis: intensity).  </li> <li> <code>ig_sample_data_param</code>: class <code>parameter</code> (metadata; viewer: \"Data Parameters IgSm\").  </li> <li> <code>ig_sample</code>: class <code>data</code> (signal, viewer: \"IgSm\"). Interferogram of the sample measurement. Oscillatory signal (x-axis: optical path difference (OPD); y-axis: amplitude of the signal).  </li> <li> <code>sc_ref_data_param</code>: class <code>parameter</code> (metadata; viewer: \"Data Parameters ScRf\"). Describes the <code>sc_sample</code> data block (see <code>sc_ref</code>).  </li> <li> <code>sc_ref</code>: class <code>data</code> (spectrum; viewer: \"Data Parameters IgSm\"). Single channel (sc) spectrum of the reference (background material: e.g., gold; y-axis: intensity).  </li> <li> <code>ig_ref_data_param</code>: class <code>parameter</code> (metadata; viewer: \"Data Parameters IgRf\").  </li> <li> <code>ig_ref</code>: class <code>data</code> (spectrum; viewer: \"IgRf\"). Interferogram of the reference measurement. (background material: e.g., gold). Oscillatory signal (x-axis: optical path difference (OPD); y-axis: amplitude of the signal)  </li> <li> <code>optics</code>: class \"parameter (metadata; viewer: \"Optic Parameters\"). Optic setup and settings such as \"Accessory\", \"Detector Setting\" or \"Source Setting\".  </li> <li> <code>optics_ref</code>: class \"parameter (metadata; viewer: \"Optic Parameters Rf\"). Optic setup and settings specific to reference measurement such as \"Accessory\", \"Detector Setting\" or \"Source Setting\".  </li> <li> <code>acquisition_ref</code>: class <code>parameter</code> (metadata; viewer: \"Acquisition parameters Rf\". Settings such as \"\"Additional Data Treatment\", (number) of \"Background Scans\" or \"Result Spectrum\" (e.g.\u00a0value \"Absorbance\").  </li> <li> <code>fourier_transformation_ref</code>: class <code>parameter</code> (metadata; viewer: \"FT - Parameters Rf\"). Fourier transform parameters of the reference sample like Apodization function (\"APF\"), end frequency limit (\"HFQ\"), start frequency limit (\"LFQ\"), nonlinearity correction (\"NLI\"), phase resolution (\"PHR\"), phase correction mode (\"PHZ\"), zero filling factor (\"ZFF\").  </li> <li> <code>fourier_transformation</code>: class <code>parameter</code> (metadata; viewer: \"FT - Parameters\"). Fourier transform parameters of the sample measurement. See <code>fourier_transformation_ref</code> for possible elements contained.  </li> <li> <code>sample</code>: class <code>parameter</code> (metadata; viewer: \"Sample Parameters\"). Extra information such as the \"Operator Name\", \"Experiment\", or \"Location\".  </li> <li> <code>acquisition</code>: class <code>parameter</code> (metadata; viewer. \"Acquisition Parameters\"). Settings of sample measurement, such as \"Additional Data Treatment\", (number) of \"Background Scans\" or \"Result Spectrum\" (e.g.\u00a0value \"Absorbance\").  </li> <li> <code>instrument_ref</code>: class <code>parameter</code> (metadata; viewer: \"Instrument Parameters Rf\"). Detailed instrument properties for the reference measurement, such as \"High Folding Limit\", \"Number of Sample Scans\", or \"Actual Signal Gain 2nd Channel\".  </li> <li> <code>instrument</code>: class <code>parameter</code> (metadata; viewer: \"Instrument Parameters\"). Detailed instrument properties for the sample measurement. See <code>instrument_ref</code>.  </li> <li> <code>lab_and_process_param_raw</code>: class <code>parameter</code> (metadata). Laboratory sample annotations such as \"Product Group\", \"Product\", \"Label Product Info 1\" (e.g., for <code>sample_id</code>), \"Value Product Info 1\" (e.g., the <code>sample_id</code> value), or the \"Measurement Position Microplate\" (e.g., for HTS-XT extension)  </li> <li> <code>lab_and_process_param_processed</code>: class <code>parameter</code> (metadata). Laboratory sample annotations for measurements done with additional OPUS data processing methods. See <code>lab_and_process_param_raw</code> </li> <li> <code>info_block</code>: class <code>parameter</code> (metadata). Infos such as \"Operator\", measurement \"Group\", \"Sample ID\". These can e.g.\u00a0be set though the OPUS/LAB sofware interface.  </li> <li> <code>history</code>: class <code>parameter</code> (metadata). Character vector with OPUS command history.  </li> <li> <code>unknown</code>: if a block-type can not be matched, no parsing is done and an empty list entry is returned. This gives you a hint that there is a block that can not yet be parsed. You can take further steps by opening an issue.  </li>"},{"location":"man/read_opus/#details","title":"Details","text":"<p><code>read_opus()</code> is the high-level interface to read multiple OPUS files at once from a data source name (<code>dsn</code>).</p> <p>It optionally supports parallel reads via the <code>{mirai}</code> backend. <code>{mirai}</code> provides a highly efficient asynchronous parallel evaluation framework via the Nanomsg Next Gen (NNG), high-performance, lightweight messaging library for distributed and concurrent applications.</p> <p>When reading in parallel, a progress bar can be enabled.</p>"},{"location":"man/read_opus_single/","title":"Read a single OPUS file","text":""},{"location":"man/read_opus_single/#description","title":"Description","text":"<p>Read a single OPUS file</p>"},{"location":"man/read_opus_single/#usage","title":"Usage","text":"<pre><code>read_opus_single(dsn, data_only = FALSE)\n</code></pre>"},{"location":"man/read_opus_single/#arguments","title":"Arguments","text":"<code>dsn</code>  source path of an opus file  <code>data_only</code>  read data and parameters with <code>FALSE</code> per default, or only read data"},{"location":"man/read_opus_single/#value","title":"Value","text":"<p>list with parsed OPUS measurement and data blocks of the spectrum measurement contained in the OPUS file. See <code>read_opus()</code> for details on the list elements returned (first-level block names and information provided).</p>"},{"location":"vignettes/opusreader2_introduction/","title":"Reading OPUS binary files from Bruker\u00ae spectrometers in R","text":"<p>Philipp Baumann and Thomas Knecht 2026-03-01</p>"},{"location":"vignettes/opusreader2_introduction/#motivation","title":"Motivation","text":"<p>Spectrometers from Bruker\u00ae Optics GmbH &amp; Co. save spectra in a special binary file format called OPUS. The OPUS suite and file specification are proprietary, therefore we have reverse-engineered our reader. With {opusreader2}, you can extract your spectroscopic data from binary files for most Fourier-Transform Infrared (FT-IR) spectrometers from Bruker\u00ae Optics GmbH directly in R.</p> <p>Each OPUS file is linked to one aggregated sample measurement, which is usually obtained using the OPUS spectroscopy software. These files have numbers as file extensions, and the numbers typically increase sequentially for each sample name, based on the settings chosen in the OPUS software.</p>"},{"location":"vignettes/opusreader2_introduction/#opus-data-extraction","title":"OPUS data extraction","text":"<p>Each OPUS file is processed by first extracting metadata information from a dedicated part of the file header. As the picture below shows, the content of the files changes based on the instrument type, the data (spectrum) blocks that the user chooses to save, and the specific measurement settings.</p> OPUS measurement settings for Bruker INVENIO\u00ae Fourier-transform (FT) mid-infrared spectrometer <p>In addition to result spectra, the binary files include:</p> <ul> <li>a comprehensive set of measurement parameters (configurations,   conditions)</li> <li>single-channel data from background measurements performed before the   sample</li> <li>other types of intermediate spectra</li> </ul> <p>Currently, we support the \u201cdata blocks to be saved\u201d for Fourier-transform infrared spectrometers.</p>"},{"location":"vignettes/opusreader2_introduction/#reading-and-parsing-opus-files-in-r","title":"Reading and parsing OPUS files in R","text":"<p>The main function, <code>read_opus()</code>, reads one or more OPUS files and returns a nested list of class <code>list_opusreader2</code>. Each list contains both the spectral data and metadata for each file.</p> <p>Let\u2019s see how this works using an example file from a Bruker ALPHA\u00ae spectrometer. This instrument measures mid-infrared spectra, here using a diffuse-reflectance accessory. The soil sample measurement shown is included with the package and is also part of the data set in Baumann et al.\u00a0(2020).</p> Data parameters for absorbance (AB) spectrum <p>We can extract all these blocks from the example OPUS file. In fact, we can access even more blocks than are displayed in the official OPUS software.</p> <pre><code>library(\"opusreader2\")\nfile_1 &lt;- opus_test_file()\nspectrum_1 &lt;- read_opus(dsn = file_1)\n</code></pre> <p>The <code>dsn</code> argument is the data source name. It can be a character vector of folder paths (to read files recursively) or specific OPUS file paths.</p> <p><code>read_opus()</code> returns a nested list of class <code>\"list_opusreader2\"</code>.</p> <pre><code>print(spectrum_1)\n#&gt; \u2554==============================================================================\u2557 \n#&gt;                      OPUS collection with \u001b[1m1 spectrum\u001b[22m                      \n#&gt; \u255a==============================================================================\u255d \n#&gt; \u001b[1mMeasurement metadata:\u001b[22m\n#&gt; * date-time range (UTC): [2020-05-10 21:10:26 , 2020-05-10 21:10:26]\n#&gt; \u001b[1m \n#&gt; * data blocks (#spectra) ------------------------------------------------------- \n#&gt; \u001b[22m   refl_no_atm_comp (1);   sc_ref (1);   sc_sample (1);\n#&gt; \u001b[1m \n#&gt; * parameter blocks (#spectra) -------------------------------------------------- \n#&gt; \u001b[22m   acquisition (1);   acquisition_ref (1);   fourier_transformation (1); \n#&gt;   fourier_transformation_ref (1);   info_block (1);   instrument (1); \n#&gt;   instrument_ref (1);   lab_and_process_param_processed (1); \n#&gt;   lab_and_process_param_raw (1);   optics (1);   optics_ref (1); \n#&gt;   quant_report_refl (1);   refl_no_atm_comp_data_param (1);   sample (1); \n#&gt;   sc_ref_data_param (1);   sc_sample_data_param (1);\nclass(spectrum_1)\n#&gt; [1] \"list_opusreader2\" \"list\"\nnames(spectrum_1)\n#&gt; [1] \"test_spectra.0\"\n</code></pre> <p>At the top level, the list structure matches how data is organized in the Bruker OPUS viewer.</p> <pre><code>meas_1 &lt;- spectrum_1[[\"BF_lo_01_soil_cal.1\"]]\nnames(meas_1)\n#&gt; NULL\n</code></pre> <p>To understand block names and their contents, see the help page <code>?read_opus</code>. Block names use <code>camel_case</code> at the second level of the <code>\"opusreader2_list\"</code> output, making them easy to access programmatically.</p> <p>Printing the entire <code>\"opusreader2_list\"</code> can flood the console. For easier exploration, use RStudio\u2019s list preview with <code>View(spectrum_1)</code> or examine specific elements with <code>names()</code> and <code>str()</code>.</p> <p>Some list elements may not be visible in the Bruker\u00ae viewer pane, but we compile them because they are either useful or actually part of the files:</p> <ol> <li><code>basic_metadata</code>: Minimal metadata to identify measurements,     including file name, sample name, and timestamps. Useful for     organizing spectral libraries and prediction workflows.</li> <li><code>ab_no_atm_comp_data_param</code>: Parameters for the absorbance (AB)     block before atmospheric compensation.</li> <li><code>ab_no_atm_comp</code>: Absorbance data before atmospheric compensation.</li> </ol> <pre><code>str(meas_1$basic_metadata)\n#&gt;  NULL\n</code></pre> <p>All types of data and parameters within OPUS files are encoded with three capital letters each.</p> <p>For example, to check the frequency of the first point (FXV), use:</p> <pre><code>meas_1$ab_data_param$parameters$FXV$parameter_value\n#&gt; NULL\n</code></pre> <p>Besides the data or parameter values, the output of each parsed OPUS block contains the block type, channel type, text type, additional type, the offset in bytes, next offset in bytes, and the chunk size in bytes for particular data blocks. This is decoded from the file header and allows for traceability in the parsing process.</p> <pre><code>class(meas_1$ab_data_param)\n#&gt; [1] \"NULL\"\nstr(meas_1$ab_data_param)\n#&gt;  NULL\n</code></pre> <pre><code>str(meas_1$instrument)\n#&gt;  NULL\n</code></pre> <p>This example spectrum was measured with atmospheric compensation (removing masking information from carbon dioxide and water vapor bands), as set in the OPUS software. OPUS files track all processing steps and macros, so you can access both raw and processed data. This enables thorough quality control before modeling or making predictions on new samples.</p>"},{"location":"vignettes/opusreader2_introduction/#reading-opus-files-recursively-from-a-folder","title":"Reading OPUS files recursively from a folder","text":"<p>You can also provide a folder as the data source name (<code>dsn</code>). This makes it easy to read all OPUS files found within a folder and its subfolders. Here, we demonstrate this using the test files that come with the {opusreader2} package, which are also used for unit testing.</p> <pre><code>test_dsn &lt;- system.file(\"extdata\", \"test_data\", package = \"opusreader2\")\ndata_test &lt;- read_opus(dsn = test_dsn)\nnames(data_test)\n#&gt; [1] \"617262_1TP_C-1_A5.0\" \"629266_1TP_A-1_C1.0\" \"BF_lo_01_soil_cal.1\"\n#&gt; [4] \"MMP_2107_Test1.001\"  \"test_spectra.0\"\n</code></pre> <p>To get the instrument name from each test file, you can use:</p> <pre><code>get_instrument_name &lt;- function(data) {\n  return(data$instrument$parameters$INS$parameter_value)\n}\n\nlapply(data_test, get_instrument_name)\n#&gt; $`617262_1TP_C-1_A5.0`\n#&gt; [1] \"INVENIO-R\"\n#&gt; \n#&gt; $`629266_1TP_A-1_C1.0`\n#&gt; [1] \"VERTEX 70\"\n#&gt; \n#&gt; $BF_lo_01_soil_cal.1\n#&gt; [1] \"Alpha\"\n#&gt; \n#&gt; $MMP_2107_Test1.001\n#&gt; [1] \"Tango\"\n#&gt; \n#&gt; $test_spectra.0\n#&gt; [1] \"TENSOR II\"\n</code></pre>"},{"location":"vignettes/opusreader2_introduction/#reading-opus-files-in-parallel","title":"Reading OPUS files in parallel","text":"<p>We implemented a parallel interface in <code>read_opus()</code> to efficiently read large collections of spectra from multiple OPUS files. The default and recommended backend, mirai, orchestrates reading files concurrently using asynchronous parallel mapping over individual OPUS files. The main advantage is faster reads, better and also fault-tolerant error handling (i.e.\u00a0custom) actions when a file cannot be read.</p> <p>Behind the scene, mirai uses nanonext and NNG (Nanomsg Next Gen) messaging, which allows high throughput and low latency between individual R processes.</p> <p>All you have to do is launching daemons.</p> <pre><code>if (!require(\"mirai\")) {\n  library(\"mirai\")\n  daemons(n = 2L, dispatcher = TRUE)\n\n  (data &lt;- read_opus(dsn = files_1000, parallel = TRUE))\n}\n</code></pre> <p>The task of reading files can be done locally or through distributed systems over a network. For further details, check out the mirai, and its vignettes.</p>"}]}